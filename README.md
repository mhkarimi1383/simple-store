# simple-store

Simply Store your file
Made to make your work easier as for saving files.

## Features

- [x] Chunking file (in one server)
- [ ] Replication (between servers)
- [ ] Centeral database for saving server stats for replication
- [WIP] Dockerizing and adding installation methods

## Made out of

- [github.com/labstack/echo](https://github.com/labstack/echo)
- [github.com/sirupsen/logrus](https://github.com/sirupsen/logrus)
- [github.com/spf13/cobra](https://github.com/spf13/cobra)
- [github.com/spf13/pflag](https://github.com/spf13/cobra)
- [github.com/swaggo/echo-swagger](https://github.com/swaggo/echo-swagger)
- [github.com/etcd-io/bbolt](https://github.com/etcd-io/bbolt)

## Usage

run project with `--help` option

All the flags can be set using Environment Variables (if you prefer) Here is the naming convention for them

All of them are starting with `SS_` and the Option (replace `-` with `_`) and make it Uppercase

Also, prometheus exporter will start at the same address in `/metrics` address

and swagger will start at `/swagger` address (If configured)

## Installation

### From Source

Clone the project and get the requirements by running

```shell
go mod tidy
```

run the project by

```shell
go run . --help
```

or build it then run it

```shell
go build .
./simple-store --help
```

### Bare Golang

After installing Golang run the command below

```shell
go install github.com/mhkarimi1383/simple-store@latest
```

### Docker

Docker images are in three categories:

1. Stable: Made when we create tags (also each tag will be usabe as docker tag) [Not Published yet.]
2. Latest: Made out of last commit on master branch (you can also use commit hashes)
3. PRs: We make image for each PR to make tests easier (pr-`PR ID`) [this section is not available yet.]

#### Docker Compose

Also Ready to use Docker Compose files are present here

[docker-compose.local.yaml](./docker-compose.local.yaml) is used for local builds

[docker-compose.stable.yaml](./docker-compose.stable.yaml) is used for production

bring it up by running

```shell
docker compose up -d -f ./docker-compose.stable.yaml # or ./docker-compose.local.yaml
```

or if you are running an older version of docker compose (lower then 2)

```shell
docker-compose up -d -f ./docker-compose.stable.yaml # or ./docker-compose.local.yaml
```

## Development

### Swagger

After making changes in api run the command below to generate openapi spec

> make sure swaggo is installed `go install github.com/swaggo/swag/cmd/swag@latest`

```shell
cd api
swag init -g api.go
```

### Package Structure

- As you can see utilities are in internal package with sub packages
- also api related things are inside api package (docs package is auto generated by swaggo)
- put all of your types inside types package
- cmd package is just for initializing project using command line

## LICENSE

This project is licensed under [GPLv3](./LICENSE)
